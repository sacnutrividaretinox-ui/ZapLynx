<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WhatsApp Micro-SaaS</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>Menu</h2>
      <ul>
        <li><button onclick="showSection('inicio')">In√≠cio</button></li>
        <li><button onclick="showSection('dashboard')">Dashboard</button></li>
        <li><button onclick="showSection('extrair')">Extrair Contatos</button></li>
        <li><button onclick="showSection('perfil')">Perfil</button></li>
        <li><button onclick="showSection('historico')">Hist√≥rico</button></li>
        <li><button onclick="showSection('templates')">Templates</button></li>
      </ul>
    </aside>

    <!-- Conte√∫do principal -->
    <main class="content">
      <!-- In√≠cio -->
      <section id="inicio" class="active">
        <h2>Bem-vindo</h2>
        <p>Aqui voc√™ pode ver v√≠deos tutoriais e instru√ß√µes.</p>
      </section>

      <!-- Dashboard -->
      <section id="dashboard">
        <h2>Dashboard</h2>
        <p>Gr√°ficos e estat√≠sticas das mensagens enviadas.</p>
      </section>

      <!-- Extrair contatos -->
      <section id="extrair">
        <h2>Extrair Contatos</h2>
        <p>Funcionalidade para capturar contatos de comunidades.</p>
      </section>

      <!-- Perfil / Conectar N√∫mero -->
      <section id="perfil">
        <h2>Perfil / Conectar N√∫mero</h2>
        <button id="btnGerarQr" class="btn-primary">Gerar QR Code</button>
        <div style="margin-top:20px;">
          <img id="qrImage" alt="QR Code aparecer√° aqui" style="max-width:300px;" />
        </div>
      </section>

      <!-- Hist√≥rico -->
      <section id="historico">
        <h2>Hist√≥rico</h2>
        <p>Logs de mensagens disparadas, agrupadas por campanhas.</p>
      </section>

      <!-- Templates -->
      <section id="templates">
        <h2>Templates</h2>
        <p>Modelos de mensagens salvas para reuso.</p>
      </section>
    </main>
  </div>

  <!-- Bot√£o flutuante de suporte -->
  <button id="btnSuporte" class="btn-suporte">üí¨ Suporte</button>

  <script>
    // Alterna entre se√ß√µes
    function showSection(id) {
      document.querySelectorAll("main section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    // Evento do bot√£o Gerar QR Code
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("btnGerarQr");
      const img = document.getElementById("qrImage");

      if (btn) {
        btn.addEventListener("click", async () => {
          img.src = "";
          img.alt = "Gerando QR Code...";

          try {
            const response = await fetch("/api/qr");
            if (!response.ok) throw new Error("Falha ao buscar QR");

            const blob = await response.blob();
            const url = URL.createObjectURL(blob);
            img.src = url;
            img.alt = "QR Code pronto para escanear";
          } catch (err) {
            console.error("Erro ao carregar QR:", err);
            img.alt = "Erro ao gerar QR Code";
          }
        });
      }
    });
  </script>
</body>
</html>
